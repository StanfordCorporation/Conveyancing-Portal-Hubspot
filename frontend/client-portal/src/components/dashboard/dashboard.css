:root {
  /* Brand Colors */
  --primary-blue: #0E6DFF;
  --primary-blue-light: #E8F1FF;
  --primary-blue-dark: #0052CC;
  --success: #10B981;
  --success-light: #D1FAE5;
  --warning: #F59E0B;
  --warning-light: #FEF3C7;
  --error: #EF4444;
  --error-light: #FEE2E2;

  /* Grays */
  --gray-50: #F9FAFB;
  --gray-100: #F3F4F6;
  --gray-200: #E5E7EB;
  --gray-300: #D1D5DB;
  --gray-400: #9CA3AF;
  --gray-500: #6B7280;
  --gray-600: #4B5563;
  --gray-700: #374151;
  --gray-800: #1F2937;
  --gray-900: #111827;

  /* Layout */
  --sidebar-width: 320px;
  --sidebar-collapsed: 80px;
  --header-height: 72px;
  --border-radius: 12px;
  --shadow-lg: 0 10px 25px rgba(14, 109, 255, 0.1);
  --shadow-xl: 0 20px 40px rgba(14, 109, 255, 0.15);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
  background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
  color: var(--gray-900);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

/* Main Layout */
.app-container {
  display: grid;
  grid-template-columns: var(--sidebar-width) 1fr;
  grid-template-rows: var(--header-height) 1fr;
  grid-template-areas: 
    "header header"
    "sidebar content";
  height: 100vh;
  transition: grid-template-columns 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.app-container.sidebar-collapsed {
  grid-template-columns: var(--sidebar-collapsed) 1fr;
}

/* Header */
.header {
  grid-area: header;
  grid-column: 1 / -1;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--gray-200);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 32px;
  z-index: 100;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 20px;
}

/* Hamburger Menu Button */
.hamburger-btn {
  display: none; /* Hidden on desktop */
  width: 44px;
  height: 44px;
  border: none;
  background: var(--gray-100);
  border-radius: 12px;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--gray-700);
}

.hamburger-btn:hover {
  background: var(--gray-200);
  transform: scale(1.05);
}

.hamburger-btn:active {
  transform: scale(0.95);
}

.logo {
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.logo:hover {
  transform: scale(1.05);
}

.logo-image {
  height: 48px;
  width: auto;
  margin-left: -15px;
  object-fit: contain;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 16px;
}

.search-bar {
  position: relative;
}

.search-bar input {
  background: var(--gray-100);
  border: 1px solid var(--gray-200);
  border-radius: 20px;
  padding: 10px 16px 10px 40px;
  width: 280px;
  font-size: 14px;
  transition: all 0.2s ease;
}

.search-bar input:focus {
  outline: none;
  border-color: var(--primary-blue);
  background: white;
  box-shadow: 0 0 0 3px var(--primary-blue-light);
}

.search-icon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--gray-400);
}

.notification-btn,
.logout-btn {
  position: relative;
  width: 44px;
  height: 44px;
  border: none;
  background: var(--gray-100);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
}

.notification-btn:hover,
.logout-btn:hover {
  background: var(--gray-200);
  transform: translateY(-1px);
}

.notification-badge {
  position: absolute;
  top: 6px;
  right: 6px;
  width: 18px;
  height: 18px;
  background: var(--error);
  color: white;
  border-radius: 50%;
  font-size: 10px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
}

.user-menu {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px;
  background: white;
  border: 1px solid var(--gray-200);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.user-menu:hover {
  box-shadow: var(--shadow-lg);
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-blue), var(--primary-blue-dark));
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 600;
  font-size: 14px;
}

.user-info h4 {
  font-size: 14px;
  font-weight: 600;
  color: var(--gray-900);
}

.user-info p {
  font-size: 12px;
  color: var(--gray-500);
}

/* Sidebar */
.sidebar {
  grid-area: sidebar;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  border-right: 1px solid var(--gray-200);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.sidebar.collapsed {
  width: var(--sidebar-collapsed);
}

/* Ensure sidebar is always visible on desktop */
@media (min-width: 769px) {
  .sidebar {
    position: relative !important;
    left: auto !important;
    transform: none !important;
  }
}

/* Property Header */
.property-header {
  padding: 0;
  border-bottom: none;
  display: flex;
  flex-direction: column;
  gap: 0;
  flex: 1;
  overflow: hidden;
}

.properties-section {
  display: flex;
  flex-direction: column;
  gap: 0;
  flex: 1;
  overflow: hidden;
}

.properties-header {
  padding: 24px 20px 16px 20px;
  border-bottom: 1px solid var(--gray-200);
}

.properties-header h2 {
  font-size: 22px;
  font-weight: 700;
  color: var(--gray-900);
  margin-bottom: 4px;
  letter-spacing: -0.5px;
}

.properties-header p {
  font-size: 13px;
  color: var(--gray-500);
}

.properties-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
  overflow-y: auto;
  flex: 1;
  scroll-behavior: smooth;
  /* Custom scrollbar styling */
  scrollbar-width: thin;
  scrollbar-color: var(--primary-blue) var(--gray-100);
}

.properties-list::-webkit-scrollbar {
  width: 8px;
}

.properties-list::-webkit-scrollbar-track {
  background: var(--gray-100);
  border-radius: 4px;
}

.properties-list::-webkit-scrollbar-thumb {
  background: var(--primary-blue);
  border-radius: 4px;
}

.properties-list::-webkit-scrollbar-thumb:hover {
  background: var(--primary-blue-dark);
}

/* Property Card Styles */
.property-card {
  border: 1.5px solid var(--gray-200);
  border-radius: 12px;
  background: white;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* No overflow property - allows expanded details to show */
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.property-card:hover {
  border-color: var(--primary-blue);
  box-shadow: 0 4px 12px rgba(14, 109, 255, 0.12);
}

.property-card.active {
  border-color: var(--primary-blue);
  background: linear-gradient(135deg, var(--primary-blue-light) 0%, rgba(14, 109, 255, 0.04) 100%);
  box-shadow: 0 4px 12px rgba(14, 109, 255, 0.15);
}

.property-card-header {
  width: 100%;
  padding: 16px;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  transition: all 0.2s ease;
}

.property-card-header:hover {
  background: var(--gray-50);
}

.property-card.active .property-card-header {
  background: transparent;
}

.property-card-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
  min-width: 0;
}

.property-card-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--gray-900);
  margin: 0;
  letter-spacing: -0.3px;
}

.property-card-address {
  font-size: 13px;
  color: var(--gray-500);
  margin: 0;
  line-height: 1.4;
}

.property-card-status {
  display: flex;
  gap: 8px;
}

.status-badge {
  display: inline-block;
  padding: 4px 10px;
  background: linear-gradient(135deg, #FBBF24 0%, #F59E0B 100%);
  color: #78350F;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
}

.property-progress {
  display: flex !important;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
  min-height: 20px; /* Ensure minimum height */
  visibility: visible !important;
}

.progress-bar {
  flex: 1;
  height: 8px;
  background-color: var(--gray-200);
  border-radius: 999px;
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
  min-width: 100px; /* Ensure minimum width */
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-blue), var(--primary-blue-dark));
  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 0 8px rgba(14, 109, 255, 0.4);
  position: relative;
}

.progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.progress-label {
  font-size: 14px;
  font-weight: 700;
  color: var(--primary-blue);
  white-space: nowrap;
  min-width: 40px;
  text-align: right;
  display: inline-block !important;
  visibility: visible !important;
}

.chevron-icon {
  width: 20px;
  height: 20px;
  color: var(--gray-400);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  flex-shrink: 0;
  display: block !important;
  visibility: visible !important;
}

.chevron-icon.open {
  transform: rotate(90deg);
}

.property-card-details {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px 16px 16px 16px;
  border-top: 1px solid var(--gray-100);
  margin-top: 8px;
  background: linear-gradient(to bottom, rgba(14, 109, 255, 0.02) 0%, transparent 100%);
  animation: fadeIn 0.3s ease-out;
  overflow: visible !important;
  max-height: none !important;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.details-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 12px 12px 12px;
  border-radius: 6px;
  transition: all 0.2s ease;
  border-left: 4px solid;
}

.details-item.completed {
  background: var(--success-light);
  border-left-color: var(--success);
  color: #065F46;
}

.details-item.in-progress {
  background: var(--primary-blue-light);
  border-left-color: var(--primary-blue);
  color: var(--primary-blue);
}

.details-item.available {
  background: #FEFCE8;
  border-left-color: var(--warning);
  color: #78350F;
}

.item-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.6);
  font-weight: 700;
  font-size: 14px;
  flex-shrink: 0;
}

.item-content {
  flex: 1;
  min-width: 0;
}

.item-content h4 {
  font-size: 13px;
  font-weight: 600;
  margin: 0 0 2px 0;
}

.item-content p {
  font-size: 12px;
  opacity: 0.8;
  margin: 0;
}

.item-check,
.item-clock,
.item-more {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

/* Stage Items - Clickable Stages */
.stage-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 12px;
  border-radius: 8px;
  border-left: 4px solid;
  border: none;
  background: white;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  width: 100%;
  text-align: left;
  position: relative;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  margin-bottom: 4px;
}

.stage-item:hover:not(.stage-locked) {
  transform: translateX(6px);
  box-shadow: 0 4px 12px rgba(14, 109, 255, 0.15);
}

/* Completed Stage - Green */
.stage-item.stage-completed {
  background: var(--success-light);
  border-left-color: var(--success);
  color: #065F46;
  box-shadow: 0 2px 6px rgba(16, 185, 129, 0.15);
}

.stage-item.stage-completed:hover {
  background: rgba(16, 185, 129, 0.15);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
}

/* Current Stage - Blue */
.stage-item.stage-current {
  background: var(--primary-blue-light);
  border-left-color: var(--primary-blue);
  color: var(--primary-blue);
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(14, 109, 255, 0.2);
  animation: pulse-border 2s infinite;
}

@keyframes pulse-border {
  0%, 100% {
    border-left-color: var(--primary-blue);
    box-shadow: 0 2px 8px rgba(14, 109, 255, 0.2);
  }
  50% {
    border-left-color: var(--primary-blue-dark);
    box-shadow: 0 4px 12px rgba(14, 109, 255, 0.3);
  }
}

.stage-item.stage-current:hover {
  background: rgba(14, 109, 255, 0.15);
  box-shadow: 0 6px 16px rgba(14, 109, 255, 0.3);
}

/* Completed and Locked Stage (after signing) */
.stage-item.stage-completed-locked {
  background: var(--success-light);
  border-left-color: var(--success);
  color: #065F46;
  opacity: 0.7;
  cursor: not-allowed;
}

.stage-item.stage-completed-locked:hover {
  background: var(--success-light);
  transform: none;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

/* Locked Stage - Gray */
.stage-item.stage-locked {
  background: var(--gray-100);
  border-left-color: var(--gray-400);
  color: var(--gray-500);
  opacity: 0.7;
  cursor: not-allowed;
  box-shadow: none;
}

.stage-item.stage-locked:hover {
  background: var(--gray-100);
  transform: none;
  box-shadow: none;
}

/* Read-Only Stage (after payment) - Clean, minimalist style */
.stage-item.stage-read-only {
  background: transparent;
  border-left-color: var(--gray-300);
  color: var(--gray-500);
  opacity: 1; /* Reset opacity to handle specific child elements */
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

/* Remove the "View Only" badge */
.stage-item.stage-read-only::after {
  content: none;
}

.stage-item.stage-read-only:hover {
  background: var(--gray-50);
  color: var(--gray-700);
  border-left-color: var(--gray-400);
  transform: translateX(4px);
}

/* Add a subtle eye icon on hover using pseudo-element for the stage number container */
.stage-item.stage-read-only:hover .stage-number::after {
  content: '';
  /* We can't easily replace the number with an icon via CSS content if the number is in the DOM.
     We will handle the icon replacement in JSX for the "settled" state.
     Here we handle the "Click to View" hint. */
}

/* Adjust stage number box for read-only state */
.stage-item.stage-read-only .stage-number {
  background: var(--gray-100);
  color: var(--gray-400);
  border: 1px solid var(--gray-200);
}

.stage-item.stage-read-only:hover .stage-number {
  background: white;
  color: var(--primary-blue);
  border-color: var(--primary-blue);
}

/* Adjust stage content for read-only state */
.stage-item.stage-read-only .stage-content h4 {
  font-weight: 500;
}

.stage-item.stage-read-only .stage-content p {
  opacity: 0.7;
}

.stage-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.6);
  font-weight: 700;
  font-size: 14px;
  flex-shrink: 0;
}

.stage-content {
  flex: 1;
  min-width: 0;
}

.stage-content h4 {
  font-size: 13px;
  font-weight: 600;
  margin: 0 0 2px 0;
}

.stage-content p {
  font-size: 12px;
  opacity: 0.8;
  margin: 0;
}

.stage-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

.stage-indicator svg {
  width: 18px;
  height: 18px;
}

.sidebar-toggle {
  width: 36px;
  height: 36px;
  border: none;
  background: linear-gradient(135deg, var(--primary-blue-light) 0%, rgba(14, 109, 255, 0.08) 100%);
  border: 1.5px solid var(--primary-blue-light);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 18px;
  color: var(--primary-blue);
  font-weight: 600;
}

.sidebar-toggle:hover {
  background: var(--primary-blue-light);
  border-color: var(--primary-blue);
  transform: scale(1.05);
}


#propertyList {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 400px;
  overflow-y: auto;
  padding-right: 8px;
  padding: 8px 0;
}

.property-item {
  padding: 16px;
  background: white;
  border: 1.5px solid var(--gray-200);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  position: relative;
  overflow: hidden;
}

.property-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 4px;
  width: 0;
  background: linear-gradient(90deg, var(--primary-blue), var(--primary-blue-dark));
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.property-item:hover {
  background: white;
  border-color: var(--primary-blue);
  box-shadow: 0 4px 12px rgba(14, 109, 255, 0.15);
  transform: translateY(-2px);
}

.property-item:hover::before {
  width: 100%;
}

.property-item.active {
  background: linear-gradient(135deg, var(--primary-blue-light) 0%, rgba(14, 109, 255, 0.05) 100%);
  border-color: var(--primary-blue);
  box-shadow: 0 4px 12px rgba(14, 109, 255, 0.2);
}

.property-item.active::before {
  width: 100%;
}

.property-item-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--gray-900);
  margin-bottom: 6px;
  letter-spacing: -0.3px;
}

.property-item-subtitle {
  font-size: 13px;
  color: var(--gray-500);
  line-height: 1.4;
}

.add-property-btn {
  width: 100%;
  padding: 12px;
  background: var(--primary-blue);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-top: 8px;
}

.add-property-btn:hover {
  background: var(--primary-blue-dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* Hide progress and navigation when switcher is open */
.sidebar.property-switcher-open .progress-overview {
  display: none;
}

.sidebar.property-switcher-open .sidebar-navigation {
  display: none;
}

.property-status-chip {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: var(--primary-blue-light);
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  color: var(--primary-blue-dark);
  width: fit-content;
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--primary-blue);
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Sidebar Footer */
.sidebar-footer {
  padding: 24px;
  border-top: 1px solid var(--gray-200);
}

.quick-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 20px;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border: none;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.action-btn.primary {
  background: var(--primary-blue);
  color: white;
}

.action-btn.primary:hover {
  background: var(--primary-blue-dark);
  transform: translateY(-1px);
}

.action-btn.secondary {
  background: var(--gray-100);
  color: var(--gray-700);
}

.action-btn.secondary:hover {
  background: var(--gray-200);
}

.btn-icon {
  font-size: 16px;
}

.property-meta {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.meta-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 12px;
}

.meta-item .label {
  color: var(--gray-500);
}

.meta-item .value {
  color: var(--gray-700);
  font-weight: 500;
}

/* Main Content Area */
.main-content {
  grid-area: content;
  padding: 32px;
  overflow-y: auto;
  background: transparent;
}

.content-header {
  margin-bottom: 32px;
}

.content-title {
  font-size: 28px;
  font-weight: 700;
  color: var(--gray-900);
  margin-bottom: 8px;
}

.content-subtitle {
  font-size: 16px;
  color: var(--gray-600);
}

.content-card {
  padding: 32px;
  margin-bottom: 24px;
}

.section-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 24px;
  background: var(--gray-100);
  padding: 4px;
  border-radius: 10px;
  flex-wrap: wrap;
}

.tab {
  flex: 1;
  min-width: 150px;
  padding: 10px 16px;
  border: none;
  background: transparent;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--gray-600);
  cursor: pointer;
  transition: all 0.2s ease;
}

.tab.active {
  background: white;
  color: var(--primary-blue);
  box-shadow: var(--shadow-lg);
}

/* Form Styles */
.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 24px;
}

.form-group {
  margin-bottom: 20px;
}

.form-label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  color: var(--gray-700);
  margin-bottom: 6px;
}

.form-label.required::after {
  content: ' *';
  color: var(--error);
}

.form-input,
.form-textarea,
.form-select {
  width: 100%;
  padding: 12px 16px;
  border: 2px solid var(--gray-200);
  border-radius: 8px;
  font-size: 14px;
  transition: all 0.2s ease;
  font-family: inherit;
}

.form-input:focus,
.form-textarea:focus,
.form-select:focus {
  outline: none;
  border-color: var(--primary-blue);
  box-shadow: 0 0 0 3px var(--primary-blue-light);
}

.form-textarea {
  resize: vertical;
  min-height: 100px;
}

.radio-group,
.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.radio-item,
.checkbox-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border: 2px solid var(--gray-200);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.radio-item:hover,
.checkbox-item:hover {
  border-color: var(--primary-blue);
  background: var(--primary-blue-light);
}

.radio-item input,
.checkbox-item input {
  cursor: pointer;
  width: 18px;
  height: 18px;
}

.radio-item input:checked,
.checkbox-item input:checked {
  accent-color: var(--primary-blue);
}

.radio-label,
.checkbox-label {
  flex: 1;
  cursor: pointer;
  font-size: 14px;
  color: var(--gray-700);
}

.conditional-field {
  display: none;
  margin-top: 16px;
  padding: 16px;
  background: var(--gray-50);
  border-radius: 8px;
  border-left: 4px solid var(--primary-blue);
}

.conditional-field.show {
  display: block;
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Content Sections */
.content-section {
  display: none;
}

.content-section.active {
  display: block;
  animation: fadeInUp 0.3s ease;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Questionnaire Sub-sections */
.questionnaire-subsection {
  display: none;
}

.questionnaire-subsection.active {
  display: block;
}

.questionnaire-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 24px;
  background: var(--gray-100);
  padding: 4px;
  border-radius: 10px;
  flex-wrap: wrap;
}

.questionnaire-tab {
  flex: 1;
  min-width: 120px;
  padding: 10px 12px;
  border: none;
  background: transparent;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 500;
  color: var(--gray-600);
  cursor: pointer;
  transition: all 0.2s ease;
}

.questionnaire-tab.active {
  background: white;
  color: var(--primary-blue);
  box-shadow: var(--shadow-lg);
}

/* Floating Actions */
.floating-actions {
  position: fixed;
  bottom: 32px;
  right: 32px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 1000;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 18px;
  border: none;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(20px);
  min-width: 140px;
}

.fab.primary {
  background: var(--primary-blue);
  color: white;
}

.fab.primary:hover {
  background: var(--primary-blue-dark);
  box-shadow: 0 6px 16px rgba(14, 109, 255, 0.3);
}

.fab.secondary {
  background: rgba(255, 255, 255, 0.95);
  color: var(--gray-700);
  border: 1.5px solid var(--gray-300);
}

.fab.secondary:hover {
  background: white;
  border-color: var(--primary-blue);
  color: var(--primary-blue);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

.fab:hover {
  transform: translateY(-2px);
}

.fab:active {
  transform: translateY(0);
}

/* Mobile Backdrop Overlay */
.mobile-backdrop {
  display: none;
  position: fixed;
  top: var(--header-height);
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: calc(100vh - var(--header-height));
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
  animation: fadeIn 0.3s ease;
  pointer-events: auto;
}

@media (min-width: 769px) {
  .mobile-backdrop {
    display: none !important;
  }
}

@media (max-width: 768px) {
  .mobile-backdrop {
    display: block;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .app-container {
    display: flex !important;
    flex-direction: column !important;
    grid-template-columns: none !important;
    grid-template-rows: none !important;
    grid-template-areas: none !important;
  }

  /* Header mobile adjustments */
  .header {
    padding: 0 16px;
    flex: 0 0 var(--header-height);
    width: 100%;
  }

  .header-left {
    gap: 12px;
  }

  /* Show hamburger button on mobile */
  .hamburger-btn {
    display: flex;
  }

  /* Hide search bar and notifications on mobile */
  .search-bar,
  .notification-btn {
    display: none !important;
  }

  /* Simplify user menu on mobile - show avatar only */
  .user-menu {
    padding: 4px;
    min-width: auto;
  }

  .user-info {
    display: none;
  }

  /* Adjust header actions spacing */
  .header-actions {
    gap: 8px;
  }

  /* Mobile backdrop - only shows when menu is open (via React state) */
  .mobile-backdrop {
    display: block; /* This element is conditionally rendered in React */
  }
  
  /* Prevent body scroll when menu is open */
  body.mobile-menu-open {
    overflow: hidden;
  }

  /* Mobile Sidebar - completely outside grid flow */
  .sidebar {
    grid-area: unset !important; /* Remove from grid */
    grid-column: unset !important;
    grid-row: unset !important;
    position: fixed !important;
    left: -320px !important; /* Use exact pixel value instead of percentage */
    top: var(--header-height) !important;
    bottom: 0 !important;
    height: calc(100vh - var(--header-height)) !important;
    width: 320px !important; /* Exact width */
    max-width: 85vw !important;
    min-width: 280px !important;
    z-index: 1000 !important;
    transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    box-shadow: 4px 0 12px rgba(0, 0, 0, 0.15) !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    background: white !important;
    border-right: 1px solid var(--gray-200) !important;
    transform: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .sidebar.mobile-open {
    left: 0 !important;
    transform: translateX(0) !important;
    /* Add a distinctive visual indicator for debugging */
    border-left: 3px solid #0E6DFF !important;
  }

  /* Force sidebar to be on top of backdrop */
  .sidebar.mobile-open {
    pointer-events: auto !important;
  }

  /* Ensure sidebar content is visible and scrollable */
  .sidebar .property-header {
    display: flex !important;
    flex: 1;
    overflow: hidden;
    flex-direction: column;
  }

  .sidebar .properties-section {
    display: flex !important;
    flex-direction: column;
    flex: 1;
    overflow: hidden;
  }

  .sidebar .properties-header {
    display: block !important;
  }

  .sidebar .properties-list {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    flex: 1;
  }

  /* Ensure property cards are visible */
  .sidebar .property-card {
    display: block !important;
  }

  .sidebar .stage-item {
    display: flex !important;
    align-items: flex-start !important;
    gap: 12px !important;
    padding: 14px 12px !important;
    min-height: auto !important;
  }

  /* Ensure stage content is visible on mobile */
  .sidebar .stage-content {
    display: block !important;
    flex: 1 !important;
    min-width: 0 !important;
    overflow: visible !important;
  }

  .sidebar .stage-content h4 {
    display: block !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    margin: 0 0 4px 0 !important;
    color: inherit !important;
    visibility: visible !important;
    opacity: 1 !important;
    line-height: 1.3 !important;
  }

  .sidebar .stage-content p {
    display: block !important;
    font-size: 12px !important;
    margin: 0 !important;
    color: inherit !important;
    visibility: visible !important;
    opacity: 0.8 !important;
    line-height: 1.4 !important;
  }

  /* Stage number visible */
  .sidebar .stage-number {
    display: flex !important;
    flex-shrink: 0 !important;
    width: 32px !important;
    height: 32px !important;
  }

  /* Stage indicator visible */
  .sidebar .stage-indicator {
    display: flex !important;
    flex-shrink: 0 !important;
    width: 18px !important;
    height: 18px !important;
  }

  /* Ensure property card details are visible */
  .sidebar .property-card-details {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    padding: 12px 16px 16px 16px !important;
  }

  /* Main content takes full width on mobile */
  .main-content {
    grid-area: unset !important;
    flex: 1 1 auto !important;
    padding: 20px 16px;
    width: 100% !important;
    max-width: 100vw !important;
    overflow-x: hidden;
    overflow-y: auto;
  }

  .content-card {
    padding: 20px 16px;
  }

  .content-title {
    font-size: 24px;
  }

  .content-subtitle {
    font-size: 14px;
  }

  /* Floating actions on mobile */
  .floating-actions {
    bottom: 20px;
    right: 16px;
    gap: 10px;
  }

  .fab {
    min-width: 120px;
    padding: 12px 16px;
    font-size: 14px;
  }

  /* Form responsiveness */
  .form-grid {
    grid-template-columns: 1fr;
  }

  /* Tab responsiveness */
  .section-tabs {
    flex-direction: column;
  }

  .tab {
    min-width: auto;
  }

  .questionnaire-tabs {
    flex-direction: column;
  }

  .questionnaire-tab {
    min-width: auto;
  }

  /* Logo adjustments on mobile */
  .logo-image {
    height: 40px;
    margin-left: 0;
  }
}

/* Tablet adjustments (768px - 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {
  .main-content {
    padding: 24px;
  }

  .search-bar input {
    width: 220px;
  }
}

/* Payment Completed Banner */
.payment-completed-banner {
  background: linear-gradient(135deg, #10B981 0%, #059669 100%);
  color: white;
  padding: 16px 24px;
  margin-bottom: 24px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.banner-content {
  display: flex;
  align-items: center;
  gap: 12px;
}

.banner-icon {
  font-size: 24px;
  font-weight: bold;
  flex-shrink: 0;
}

.banner-text {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.banner-text strong {
  font-size: 16px;
  font-weight: 600;
}

.banner-text span {
  font-size: 14px;
  opacity: 0.95;
}

.banner-link {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 600;
  text-decoration: underline;
  transition: all 0.2s;
  font-size: inherit;
  margin-left: 4px;
}

.banner-link:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: translateY(-1px);
}

/* Read-Only Badge */
.read-only-badge {
  display: inline-block;
  background: #94A3B8;
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-left: 12px;
}

.read-only-notice {
  background: #F1F5F9;
  border-left: 4px solid #94A3B8;
  padding: 12px 16px;
  margin-bottom: 16px;
  border-radius: 4px;
  color: #475569;
  font-size: 14px;
}

.read-only-notice p {
  margin: 0;
  font-weight: 500;
}
